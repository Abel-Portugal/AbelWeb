<html><head><base href="https://www.rjcomercialpdv.com/"><title>RJ COMERCIAL PDV - Sistema de Frente de Caixa</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f0f2f5;
    height: 100%;
  }
  .app-container {
    display: flex;
    height: 100%;
  }
  .sidebar {
    width: 200px;
    background-color: #2c3e50;
    color: white;
    padding: 20px;
  }
  .sidebar h2 {
    margin-bottom: 20px;
    font-size: 24px;
  }
  .sidebar ul {
    list-style-type: none;
    padding: 0;
  }
  .sidebar li {
    margin-bottom: 10px;
  }
  .sidebar a {
    color: white;
    text-decoration: none;
    font-size: 16px;
    display: flex;
    align-items: center;
    padding: 10px;
    border-radius: 5px;
    transition: background-color 0.3s;
  }
  .sidebar a:hover {
    background-color: #34495e;
  }
  .sidebar .icon {
    margin-right: 10px;
    width: 24px;
    height: 24px;
  }
  .main-content {
    flex-grow: 1;
    padding: 20px;
    overflow-y: auto;
  }
  .header {
    background-color: white;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-bottom: 20px;
  }
  .header h1 {
    margin: 0;
    font-size: 28px;
    color: #2c3e50;
  }
  .card {
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 20px;
    margin-bottom: 20px;
  }
  .card h2 {
    margin-top: 0;
    color: #2c3e50;
  }
  .form-group {
    margin-bottom: 15px;
  }
  .form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #34495e;
  }
  .form-group input[type="text"],
  .form-group input[type="number"],
  .form-group select {
    width: 100%;
    padding: 8px;
    border: 1px solid #bdc3c7;
    border-radius: 4px;
    font-size: 14px;
  }
  .btn {
    background-color: #3498db;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .btn:hover {
    background-color: #2980b9;
  }
  .btn .icon {
    margin-right: 8px;
    width: 20px;
    height: 20px;
  }
  .product-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 20px;
  }
  .product-item {
    background-color: white;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    padding: 15px;
    text-align: center;
  }
  .product-item img {
    max-width: 100%;
    height: auto;
    margin-bottom: 10px;
  }
  .product-item h3 {
    margin: 0;
    font-size: 18px;
    color: #2c3e50;
  }
  .product-item p {
    color: #7f8c8d;
    margin: 5px 0;
  }
  .product-item .price {
    font-weight: bold;
    color: #e74c3c;
    font-size: 16px;
  }
  #sales-form {
    margin-top: 20px;
  }
  #sale-items {
    margin-bottom: 15px;
  }
  #total-amount {
    font-weight: bold;
    font-size: 18px;
    margin-top: 10px;
  }
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="app-container">
    <aside class="sidebar">
      <h2>RJ COMERCIAL PDV</h2>
      <ul>
        <li>
          <a href="#dashboard">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="7" height="7"></rect>
              <rect x="14" y="3" width="7" height="7"></rect>
              <rect x="14" y="14" width="7" height="7"></rect>
              <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
            Dashboard
          </a>
        </li>
        <li>
          <a href="#produtos">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path>
              <line x1="3" y1="6" x2="21" y2="6"></line>
              <path d="M16 10a4 4 0 0 1-8 0"></path>
            </svg>
            Produtos
          </a>
        </li>
        <li>
          <a href="#vendas" id="vendas-link">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="1" x2="12" y2="23"></line>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
            Vendas
          </a>
        </li>
        <li>
          <a href="#relatorios" id="relatorios-link">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="18" y1="20" x2="18" y2="10"></line>
              <line x1="12" y1="20" x2="12" y2="4"></line>
              <line x1="6" y1="20" x2="6" y2="14"></line>
            </svg>
            Relatórios
          </a>
        </li>
        <li>
          <a href="#configuracoes">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="3"></circle>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
            Configurações
          </a>
        </li>
      </ul>
    </aside>
    <main class="main-content">
      <header class="header">
        <h1>Bem-vindo ao RJ COMERCIAL PDV</h1>
      </header>
      <section id="dashboard" class="card">
        <h2>Dashboard</h2>
        <p>Visão geral das suas vendas e estoque.</p>
        <!-- Aqui você pode adicionar gráficos e estatísticas -->
      </section>
      <section id="produtos" class="card">
        <h2>Gerenciar Produtos</h2>
        <form id="product-form">
          <div class="form-group">
            <label for="product-name">Nome do Produto:</label>
            <input type="text" id="product-name" required>
          </div>
          <div class="form-group">
            <label for="product-price">Preço (Kz):</label>
            <input type="number" id="product-price" step="0.01" required>
          </div>
          <div class="form-group">
            <label for="product-quantity">Quantidade em Estoque:</label>
            <input type="number" id="product-quantity" required>
          </div>
          <button type="submit" class="btn">
            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="5" x2="12" y2="19"></line>
              <line x1="5" y1="12" x2="19" y2="12"></line>
            </svg>
            Adicionar Produto
          </button>
        </form>
      </section>
      <section id="product-list" class="card">
        <h2>Lista de Produtos</h2>
        <div class="product-list">
          <!-- Produtos serão adicionados aqui dinamicamente -->
        </div>
      </section>
      <section id="vendas" class="card" style="display: none;">
        <h2>Realizar Venda</h2>
        <form id="sales-form">
          <div class="form-group">
            <label for="product-select">Selecione o Produto:</label>
            <select id="product-select" required>
              <!-- Opções de produtos serão adicionadas dinamicamente -->
            </select>
          </div>
          <div class="form-group">
            <label for="sale-quantity">Quantidade:</label>
            <input type="number" id="sale-quantity" min="1" required>
          </div>
          <button type="submit" class="btn">Adicionar à Venda</button>
        </form>
        <div id="sale-items">
          <!-- Itens da venda serão adicionados aqui -->
        </div>
        <div id="total-amount">Total: 0 Kz</div>
        <button id="complete-sale" class="btn">Finalizar Venda</button>
      </section>
      <section id="relatorios" class="card" style="display: none;">
        <h2>Relatórios de Vendas</h2>
        <button id="generate-report" class="btn">Gerar Relatório PDF</button>
      </section>
    </main>
  </div>

  <script>
    // Simulação de banco de dados local
    let localDatabase = {
      products: [],
      sales: []
    };

    // Função para adicionar produto
    function addProduct(name, price, quantity) {
      const product = {
        id: Date.now(),
        name,
        price,
        quantity
      };
      localDatabase.products.push(product);
      saveToLocalStorage();
      renderProducts();
      updateProductSelect();
    }

    // Função para renderizar produtos
    function renderProducts() {
      const productList = document.querySelector('.product-list');
      productList.innerHTML = '';
      localDatabase.products.forEach(product => {
        const productElement = document.createElement('div');
        productElement.classList.add('product-item');
        productElement.innerHTML = `
          <h3>${product.name}</h3>
          <p>Estoque: ${product.quantity}</p>
          <p class="price">${product.price.toFixed(2)} Kz</p>
        `;
        productList.appendChild(productElement);
      });
    }

    // Função para salvar no localStorage
    function saveToLocalStorage() {
      localStorage.setItem('rjComercialPdvData', JSON.stringify(localDatabase));
    }

    // Função para carregar do localStorage
    function loadFromLocalStorage() {
      const data = localStorage.getItem('rjComercialPdvData');
      if (data) {
        localDatabase = JSON.parse(data);
        renderProducts();
        updateProductSelect();
      }
    }

    // Função para atualizar o select de produtos na tela de vendas
    function updateProductSelect() {
      const productSelect = document.getElementById('product-select');
      productSelect.innerHTML = '<option value="">Selecione um produto</option>';
      localDatabase.products.forEach(product => {
        const option = document.createElement('option');
        option.value = product.id;
        option.textContent = `${product.name} - ${product.price.toFixed(2)} Kz`;
        productSelect.appendChild(option);
      });
    }

    // Variáveis para controle da venda atual
    let currentSale = [];
    let totalAmount = 0;

    // Função para adicionar item à venda
    function addItemToSale(productId, quantity) {
      const product = localDatabase.products.find(p => p.id == productId);
      if (product && product.quantity >= quantity) {
        const saleItem = {
          productId,
          name: product.name,
          price: product.price,
          quantity
        };
        currentSale.push(saleItem);
        product.quantity -= quantity;
        totalAmount += product.price * quantity;
        renderSaleItems();
        saveToLocalStorage();
      } else {
        alert('Produto não disponível em estoque suficiente!');
      }
    }

    // Função para renderizar itens da venda atual
    function renderSaleItems() {
      const saleItemsContainer = document.getElementById('sale-items');
      saleItemsContainer.innerHTML = '';
      currentSale.forEach((item, index) => {
        const itemElement = document.createElement('div');
        itemElement.innerHTML = `
          ${item.name} - ${item.quantity} x ${item.price.toFixed(2)} Kz = ${(item.price * item.quantity).toFixed(2)} Kz
          <button onclick="removeItemFromSale(${index})">Remover</button>
        `;
        saleItemsContainer.appendChild(itemElement);
      });
      document.getElementById('total-amount').textContent = `Total: ${totalAmount.toFixed(2)} Kz`;
    }

    // Função para remover item da venda
    function removeItemFromSale(index) {
      const removedItem = currentSale[index];
      const product = localDatabase.products.find(p => p.id == removedItem.productId);
      product.quantity += removedItem.quantity;
      totalAmount -= removedItem.price * removedItem.quantity;
      currentSale.splice(index, 1);
      renderSaleItems();
      saveToLocalStorage();
    }

    // Função para finalizar a venda
    function completeSale() {
      if (currentSale.length === 0) {
        alert('Adicione itens à venda antes de finalizar.');
        return;
      }
      const sale = {
        id: Date.now(),
        items: currentSale,
        total: totalAmount,
        date: new Date().toISOString()
      };
      localDatabase.sales.push(sale);
      saveToLocalStorage();
      generateSalePDF(sale);
      currentSale = [];
      totalAmount = 0;
      renderSaleItems();
      alert('Venda finalizada com sucesso!');
    }

    // Função para gerar PDF da venda
    function generateSalePDF(sale) {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      
      doc.setFontSize(18);
      doc.text('Comprovante de Venda', 105, 20, null, null, 'center');
      
      doc.setFontSize(12);
      doc.text(`Data: ${new Date(sale.date).toLocaleString()}`, 20, 30);
      doc.text(`ID da Venda: ${sale.id}`, 20, 40);
      
      let yPosition = 60;
      doc.setFontSize(14);
      doc.text('Itens:', 20, yPosition);
      yPosition += 10;
      
      sale.items.forEach(item => {
        doc.setFontSize(12);
        doc.text(`${item.name} - ${item.quantity} x ${item.price.toFixed(2)} Kz = ${(item.price * item.quantity).toFixed(2)} Kz`, 30, yPosition);
        yPosition += 10;
      });
      
      doc.setFontSize(14);
      doc.text(`Total: ${sale.total.toFixed(2)} Kz`, 20, yPosition + 10);
      
      doc.save(`venda_${sale.id}.pdf`);
    }

    // Função para gerar relatório de vendas
    function generateSalesReport() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      
      doc.setFontSize(18);
      doc.text('Relatório de Vendas', 105, 20, null, null, 'center');
      
      let yPosition = 40;
      localDatabase.sales.forEach((sale, index) => {
        doc.setFontSize(14);
        doc.text(`Venda #${index + 1}`, 20, yPosition);
        yPosition += 10;
        
        doc.setFontSize(12);
        doc.text(`Data: ${new Date(sale.date).toLocaleString()}`, 30, yPosition);
        yPosition += 10;
        doc.text(`Total: ${sale.total.toFixed(2)} Kz`, 30, yPosition);
        yPosition += 20;
      });
      
      const totalSales = localDatabase.sales.reduce((sum, sale) => sum + sale.total, 0);
      doc.setFontSize(16);
      doc.text(`Total de Vendas: ${totalSales.toFixed(2)} Kz`, 20, yPosition);
      
      doc.save('relatorio_vendas.pdf');
    }

    // Event listeners
    document.getElementById('product-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('product-name').value;
      const price = parseFloat(document.getElementById('product-price').value);
      const quantity = parseInt(document.getElementById('product-quantity').value);
      addProduct(name, price, quantity);
      this.reset();
    });

    document.getElementById('sales-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const productId = document.getElementById('product-select').value;
      const quantity = parseInt(document.getElementById('sale-quantity').value);
      addItemToSale(productId, quantity);
      this.reset();
    });

    document.getElementById('complete-sale').addEventListener('click', completeSale);

    document.getElementById('generate-report').addEventListener('click', generateSalesReport);

    document.getElementById('vendas-link').addEventListener('click', function(e) {
      e.preventDefault();
      document.getElementById('dashboard').style.display = 'none';
      document.getElementById('produtos').style.display = 'none';
      document.getElementById('product-list').style.display = 'none';
      document.getElementById('vendas').style.display = 'block';
      document.getElementById('relatorios').style.display = 'none';
    });

    document.getElementById('relatorios-link').addEventListener('click', function(e) {
      e.preventDefault();
      document.getElementById('dashboard').style.display = 'none';
      document.getElementById('produtos').style.display = 'none';
      document.getElementById('product-list').style.display = 'none';
      document.getElementById('vendas').style.display = 'none';
      document.getElementById('relatorios').style.display = 'block';
    });

    // Carregar dados ao iniciar
    loadFromLocalStorage();
  </script>
</body>
</html>
